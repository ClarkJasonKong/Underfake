<html>
<body>

<canvas id= "Underfake" width="1800" height="900" input type="text" onkeydown="function(event)" onkeyup="function(event)"  onmousedown="function(event)" ></canvas>
<script>

var canvas = document.getElementById("Underfake")
var context = canvas.getContext("2d")

var screenWidth = 1800
var screenHeight = 900
var boxWidth = 50
var boxHeight = 50

var posX
var posY
var moveUp
var moveDown
var moveLeft
var moveRight
var moveSpace

var maxRpr = 2
var minRpr = 0
var rainDropsX = new Array()
var rainDropsY = new Array()
var rainDropWidth = 1
var rainDropHeight = 9
var rainDropSpeed = 8

var mess
var numofMess
document.onkeydown = keyDown;
document.onkeyup = keyUp



var menuScreen = true
var gameScreen = false

menuInit()
gameInit()
mainLoop()

function mainLoop(){
	

	if(menuScreen)
		menuLoop()
	else if (gameScreen)
		gameLoop()
	setTimeout(mainLoop, 16)
}

function menuInit(){
	mess = 0
	numofMess = 8
}

function menuLoop(){
	menuUpdate()
	addRain()
	drawBG()
	drawRain()
	drawTitle()
	//drawChoices()
}
function menuUpdate(){
	for(var i = 0; i < rainDropsY.length ; i++){
		if(rainDropsY[i] > screenHeight){
			rainDropsY.splice(i, 1)
			rainDropsX.splice(i, 1)
		}
		rainDropsY[i]+=rainDropSpeed;
	}
}
function addRain(){
	for( var i = 0; i< Math.floor((Math.random() * maxRpr) + minRpr); i++){
		rainDropsX.push(Math.floor(Math.random() * screenWidth))
		rainDropsY.push(0)
	}
}
function drawRain(){
	for(var i=0; i< rainDropsY.length ; i++){
		context.fillStyle = "blue"
		context.fillRect(rainDropsX[i], rainDropsY[i], rainDropWidth, rainDropHeight)
	}
}
function drawTitle(){
	context.fillStyle="blue"
	context.font = "20px Charlemagne STD";
	context.fillText("Press up or down", screenWidth/2-150, screenHeight/15)

	context.fillStyle="red"
	context.font = "30px Charlemagne STD";
	if(mess >=1)
		context.fillText("I shouldn't be overreacting, I'm sorry.", screenWidth/15, screenHeight/10+50)
	if(mess >=2)
		context.fillText("I've just been in a bad place for the past week", screenWidth/15, screenHeight/10 +100)
	if(mess >=3)
		context.fillText("and my stupid feelings are trying to find someone to blame", screenWidth/15, screenHeight/10 +150)
	if(mess >=4)
		context.fillText("i'm just very confused at the moment.", screenWidth/15, screenHeight/10 +200)
	if(mess >=5)
		context.fillText("and I'm sorry if I'm letting it all out on you", screenWidth/15, screenHeight/10 +250)
	if(mess >=6)
		context.fillText("i just hope everything's fine ", screenWidth/15, screenHeight/10 +300)
	if(mess >=7)
		context.fillText("and i hope you're doing okay", screenWidth/15, screenHeight/10 +350)
	if(mess >=8)
		context.fillText("goodbye", screenWidth/15, screenHeight/10 +500)
}
function gameInit(){
	posX = 0
	posY = screenHeight-boxHeight
	moveSpace = 10
	isRed = true
}
function gameLoop(){
	gameUpdate()
	drawBG()
	drawPlayer()
}
function gameUpdate(){

	if (isRed){
		moveSpace = 10
		boxWidth = 20
		boxHeight = 20
	}
	else if (isBlue){
		moveSpace = 5
		boxWidth = 40
		boxHeight = 40
	}
	else if (isYellow){
		moveSpace = 5
		boxWidth = 40
		boxHeight = 40
	}
	else if (isGreen){
		moveSpace = 5
		boxWidth = 40
		boxHeight = 40
	}
	if(moveLeft && posX > 0){
	   posX -= moveSpace
	}
	if(moveRight && posX < screenWidth - boxWidth){
	   posX += moveSpace
	}
	if(moveUp && posY > 0 ){
	   posY -= moveSpace 
	}
	if(moveDown && posY < screenHeight - boxHeight){
	   posY += moveSpace
	}
}
function drawPlayer(){
	if (isRed)
		context.fillStyle = "red"
	else if (isBlue)
		context.fillStyle = "blue"
	else if (isYellow)
		context.fillStyle = "yellow"
	else if (isGreen)
		context.fillStyle = "green"
	context.fillRect(posX, posY, boxWidth, boxHeight)
}

function drawBG(){
	context.fillStyle = "black"
	context.fillRect(0, 0, screenWidth, screenHeight)
}

function keyDown(event){
	//console.log(event.keyCode);

	if(event.keyCode == 37){
		if(menuScreen){

		}
		else if(gameScreen){
			moveLeft = true
		}
	}
	else if (event.keyCode == 39){
		if(menuScreen){
			
		}
		else if(gameScreen){
			moveRight = true
		}
	}
	else if (event.keyCode == 38){
		if(menuScreen){
			
		}
		else if(gameScreen){
			moveUp = true
		}
	}
	else if (event.keyCode==40 ){
		if(menuScreen){
			
		}
		else if(gameScreen){
			moveDown = true
		}
	}
}

function keyUp(event){
	//console.log(event.keyCode);

	if(event.keyCode == 37){
		if(menuScreen){

		}
		else if(gameScreen){
			moveLeft = false
		}
	}
	else if (event.keyCode == 39){
		if(menuScreen){

		}
		else if(gameScreen){
			moveRight = false
		}
	}
	else if (event.keyCode == 38){
		if(menuScreen){
			if(mess>0)
				mess--
		}
		else if(gameScreen){
			moveUp = false
		}
	}
	else if (event.keyCode ==40){
		if(menuScreen){
			if(mess < numofMess)
				mess++
		}
		else if(gameScreen){
			moveDown = false
		}
	}
	if(event.keyCode == 81){
		isRed = true
		isBlue = false
		isYellow = false
		isGreen = false
	}
	if(event.keyCode == 87){
		isRed = false
		isBlue = true
		isYellow = false
		isGreen = false
	}
	if(event.keyCode == 69){
		isRed = false
		isBlue = false
		isYellow = true
		isGreen = false
	}
	if(event.keyCode == 82){
		isRed = false
		isBlue = false
		isYellow = false
		isGreen = true
	}
}
</script>

</body>
</html>